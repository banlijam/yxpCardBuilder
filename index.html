<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>弈仙牌卡牌生成器</title>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link rel="stylesheet" href="./card-style.css">
</head>

<body>
    <div class="config-panel">
        <div class="config-item">
            <label>卡牌名称：</label>
            <input type="text" id="cardNameInput" value="冰灵护体丹" oninput="updateCards()">
        </div>
        <div class="config-item">
            <label>修为：</label>
            <div class="xiuwei-radio-group">
                <input type="radio" name="xiuwei" value="LianQi" onchange="updateCards()"> 练气
                <input type="radio" name="xiuwei" value="ZhuJi" onchange="updateCards()"> 筑基
                <input type="radio" name="xiuwei" value="JinDan" onchange="updateCards()"> 金丹
                <input type="radio" name="xiuwei" value="YuanYing" id="xiuweiYingYuan" onchange="updateCards()"> 元婴
                <input type="radio" name="xiuwei" value="HuaShen" checked onchange="updateCards()"> 化神
                <input type="radio" name="xiuwei" value="FanXu" onchange="updateCards()"> 返虚
            </div>
        </div>
        <div class="config-item">
            <label>消耗：</label>
            <div class="cost-type-group">
                <input type="radio" name="costType" value="none" onchange="toggleCostInput()"> 无
                <input type="radio" name="costType" value="life" onchange="toggleCostInput()"> 血
                <input type="radio" name="costType" value="spirit" checked onchange="toggleCostInput()"> 灵气
                <input type="number" id="costNumInput" value="1" style="width: 60px;" oninput="updateCards()">
            </div>
        </div>
        <div class="config-item">
            <label>卡牌类型：</label>
            <div class="cost-type-group">
                <input type="radio" name="cardType" value="none" onchange="toggleCardInput()"> 无
                <input type="radio" name="cardType" value="fabao" onchange="toggleCardInput()"> 法宝
                <input type="radio" name="cardType" value="lingchong" checked onchange="toggleCardInput()"> 灵宠
            </div>
        </div>
        <div class="config-item">
            <label>卡牌卡图：</label>
            <input type="file" id="cardImgInput" accept="image/*" onchange="previewCardImg()">
        </div>
        <div class="config-item">
            <label>卡牌描述（等级1）：</label>
            <div class="rich-text-toolbar">
                <button class="tool-btn bold" onclick="formatText('bold', 'descInput')">加粗</button>
                <button class="color-picker-btn" onclick="document.getElementById('textColorPicker').click()">
                    <span class="color-block" id="previewColor"></span>
                    颜色
                </button>
                <input type="color" id="textColorPicker" value="#c0392b" title="设置文字颜色" onchange="updateColorPreview()">
            </div>
            <textarea id="descInput" rows="3" oninput="updateCards()">获得二层**护体**
[color=#c0392b]消耗[/color]</textarea>
        </div>
        <div class="config-item">
            <label>卡牌描述（等级2）：</label>
            <textarea id="descInput2" rows="3" oninput="updateCards()">获得三层**护体**
[color=#c0392b]消耗[/color]</textarea>
        </div>
        <div class="config-item">
            <label>卡牌描述（等级3）：</label>
            <textarea id="descInput3" rows="3" oninput="updateCards()">获得四层**护体**
[color=#c0392b]消耗[/color]</textarea>
        </div>
        <button class="export-btn" onclick="exportCardsAsImage()">导出卡牌</button>
    </div>

    <div class="cards-container" id="cardsToExport">
        <div class="card-container">
            <img class="card-img" id="cardImg0" src="" alt="卡图" style="display: none;">
            <div class="card-bg" id="cardBg0" id="cardBg0"></div>
            <div class="card-desc-bg"></div>
            <div class="cost-wrapper">
                <div id="costNum0" class="cost-num">1</div>
            </div>
            <div class="card-name" id="cardName0">冰灵护体丹</div>
            <div class="card-parent">
                <div class="card-desc" id="cardDesc0">获得二层护体
                    <span style="color:#c0392b">消耗</span>
                </div>
            </div>
        </div>
        <div class="card-container">
            <img class="card-img" id="cardImg1" src="" alt="卡图" style="display: none;">
            <div class="card-bg" id="cardBg1"></div>
            <div class="card-desc-bg"></div>
            <div class="cost-wrapper">
                <div id="costNum1" class="cost-num">1</div>
            </div>
            <div class="card-name" id="cardName1">冰灵护体丹</div>
            <div class="card-parent">
                <div class="card-desc" id="cardDesc1">获得二层护体
                    <span style="color:#c0392b">消耗</span>
                </div>
            </div>
        </div>
        <div class="card-container">
            <img class="card-img" id="cardImg2" src="" alt="卡图" style="display: none;">
            <div class="card-bg" id="cardBg2"></div>
            <div class="card-desc-bg"></div>
            <div class="cost-wrapper">
                <div id="costNum2" class="cost-num">1</div>
            </div>
            <div class="card-name" id="cardName2">冰灵护体丹</div>
            <div class="card-parent">
                <div class="card-desc" id="cardDesc2">获得二层护体
                    <span style="color:#c0392b">消耗</span>
                </div>
            </div>
        </div>
    </div>

    <script src="./card-script.js"></script>
</body>

</html>